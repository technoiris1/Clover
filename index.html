<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Clover — Health & Environment Dashboard</title>
        <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
    </head>
    <body
        class="bg-gradient-to-b from-green-50 to-green-100 min-h-screen flex flex-col items-center justify-center"
    >
        <header class="text-center mb-6">
            <h1 class="text-3xl font-semibold text-green-700 tracking-tight">
                Clover Graphical Analysis
            </h1>
            <p class="text-gray-600 text-sm max-w-md mx-auto mt-1">
                Real-time environment & body metrics visualized by
                <span class="text-green-700 font-medium">Clover Health Bot</span
                >.
            </p>
        </header>
        <div class="flex flex-wrap gap-6 justify-center items-start">
            <div
                class="bg-white shadow-md rounded-2xl p-6 flex flex-col items-center justify-center w-72"
            >
                <h2 class="text-lg font-semibold text-green-700 mb-1">
                    Air Quality Index
                </h2>
                <p class="text-gray-500 text-xs mb-4">Atmospheric reading</p>
                <canvas id="aqiChart" width="230" height="230"></canvas>
            </div>
            <div
                class="bg-white shadow-md rounded-2xl p-6 flex flex-col items-center justify-center w-72"
            >
                <h2 class="text-lg font-semibold text-sky-700 mb-1">
                    Ambient Temperature
                </h2>
                <p class="text-gray-500 text-xs mb-4">Environmental reading</p>
                <canvas id="tempChart" width="230" height="230"></canvas>
            </div>
            <div
                class="bg-white shadow-md rounded-2xl p-6 flex flex-col items-center justify-center w-72"
            >
                <h2 class="text-lg font-semibold text-rose-700 mb-1">
                    Body Temperature
                </h2>
                <p class="text-gray-500 text-xs mb-4">Physiological reading</p>
                <canvas id="bodyChart" width="230" height="230"></canvas>
            </div>
            <div
                class="bg-white shadow-md rounded-2xl p-6 flex flex-col items-center justify-center w-72"
            >
                <h2 class="text-lg font-semibold text-blue-700 mb-1">
                    Humidity
                </h2>
                <p class="text-gray-500 text-xs mb-4">
                    Relative humidity level
                </p>
                <canvas id="humChart" width="230" height="230"></canvas>
            </div>
        </div>

        <script>
            const AQI_COLORS = [
                "rgb(76,175,80)",
                "rgb(255,235,59)",
                "rgb(255,152,0)",
                "rgb(244,67,54)",
                "rgb(156,39,176)",
                "rgb(126,0,35)",
            ];
            const AQI_LEVELS = [
                { max: 50, label: "Good" },
                { max: 100, label: "Moderate" },
                { max: 200, label: "Unhealthy (Sensitive)" },
                { max: 300, label: "Unhealthy" },
                { max: 400, label: "Very Unhealthy" },
                { max: 600, label: "Hazardous" },
            ];
            const AQI_VALUE = 268;
            const getAqiColor = (v) =>
                v <= 50
                    ? AQI_COLORS[0]
                    : v <= 100
                      ? AQI_COLORS[1]
                      : v <= 200
                        ? AQI_COLORS[2]
                        : v <= 300
                          ? AQI_COLORS[3]
                          : v <= 400
                            ? AQI_COLORS[4]
                            : AQI_COLORS[5];
            const getAqiStatus = (v) =>
                AQI_LEVELS.find((l) => v <= l.max)?.label || "Unknown";
            const aqiTextPlugin = {
                id: "aqiText",
                afterDraw(chart) {
                    const { ctx, chartArea } = chart;
                    const { width, height } = chartArea;
                    const v = AQI_VALUE;
                    ctx.save();
                    ctx.font = "bold 26px Inter";
                    ctx.fillStyle = "#333";
                    ctx.textAlign = "center";
                    ctx.fillText(v, width / 2, height / 1.35);
                    ctx.font = "14px Inter";
                    ctx.fillStyle = getAqiColor(v);
                    ctx.fillText(getAqiStatus(v), width / 2, height / 1.15);
                    ctx.restore();
                },
            };
            new Chart(document.getElementById("aqiChart"), {
                type: "doughnut",
                data: {
                    datasets: [
                        {
                            data: [AQI_VALUE, 600 - AQI_VALUE],
                            backgroundColor: [
                                getAqiColor(AQI_VALUE),
                                "#eaeaea",
                            ],
                            borderWidth: 0,
                            cutout: "75%",
                        },
                    ],
                },
                options: {
                    plugins: {
                        tooltip: { enabled: false },
                        legend: { display: false },
                    },
                    circumference: 180,
                    rotation: -90,
                },
                plugins: [aqiTextPlugin],
            });
            const TEMP_MIN = -10,
                TEMP_MAX = 50,
                TEMP_VALUE = 34;
            const getTempColor = (t) =>
                t <= 0
                    ? "rgb(33,150,243)"
                    : t <= 25
                      ? "rgb(76,175,80)"
                      : t <= 40
                        ? "rgb(255,152,0)"
                        : "rgb(244,67,54)";
            const getTempStatus = (t) =>
                t <= 0 ? "Cold" : t <= 25 ? "Mild" : t <= 40 ? "Warm" : "Hot";
            const tempTextPlugin = {
                id: "tempText",
                afterDraw(chart) {
                    const { ctx, chartArea } = chart;
                    const { width, height } = chartArea;
                    const t = TEMP_VALUE;
                    ctx.save();
                    ctx.font = "bold 26px Inter";
                    ctx.fillStyle = "#333";
                    ctx.textAlign = "center";
                    ctx.fillText(`${t}°C`, width / 2, height / 1.35);
                    ctx.font = "14px Inter";
                    ctx.fillStyle = getTempColor(t);
                    ctx.fillText(getTempStatus(t), width / 2, height / 1.15);
                    ctx.restore();
                },
            };
            const tRange = TEMP_MAX - TEMP_MIN,
                tNorm = TEMP_VALUE - TEMP_MIN;
            new Chart(document.getElementById("tempChart"), {
                type: "doughnut",
                data: {
                    datasets: [
                        {
                            data: [tNorm, tRange - tNorm],
                            backgroundColor: [
                                getTempColor(TEMP_VALUE),
                                "#eaeaea",
                            ],
                            borderWidth: 0,
                            cutout: "75%",
                        },
                    ],
                },
                options: {
                    plugins: {
                        tooltip: { enabled: false },
                        legend: { display: false },
                    },
                    circumference: 180,
                    rotation: -90,
                },
                plugins: [tempTextPlugin],
            });
            const BODY_MIN = 35,
                BODY_MAX = 41,
                BODY_VALUE = 37.4;
            const getBodyColor = (t) =>
                t < 36
                    ? "rgb(33,150,243)"
                    : t < 37.5
                      ? "rgb(76,175,80)"
                      : t < 39
                        ? "rgb(255,152,0)"
                        : t <= 41
                          ? "rgb(244,67,54)"
                          : "rgb(90,90,90)";
            const getBodyStatus = (t) =>
                t < 36
                    ? "Hypothermic"
                    : t < 37.5
                      ? "Normal"
                      : t < 39
                        ? "Fever"
                        : t <= 41
                          ? "High Fever"
                          : "Fatal";
            const bodyTextPlugin = {
                id: "bodyText",
                afterDraw(chart) {
                    const { ctx, chartArea } = chart;
                    const { width, height } = chartArea;
                    const t = BODY_VALUE;
                    ctx.save();
                    ctx.font = "bold 26px Inter";
                    ctx.fillStyle = "#333";
                    ctx.textAlign = "center";
                    ctx.fillText(`${t}°C`, width / 2, height / 1.35);
                    ctx.font = "14px Inter";
                    ctx.fillStyle = getBodyColor(t);
                    ctx.fillText(getBodyStatus(t), width / 2, height / 1.15);
                    ctx.restore();
                },
            };
            const bRange = BODY_MAX - BODY_MIN,
                bNorm = BODY_VALUE - BODY_MIN;
            new Chart(document.getElementById("bodyChart"), {
                type: "doughnut",
                data: {
                    datasets: [
                        {
                            data: [bNorm, bRange - bNorm],
                            backgroundColor: [
                                getBodyColor(BODY_VALUE),
                                "#eaeaea",
                            ],
                            borderWidth: 0,
                            cutout: "75%",
                        },
                    ],
                },
                options: {
                    plugins: {
                        tooltip: { enabled: false },
                        legend: { display: false },
                    },
                    circumference: 180,
                    rotation: -90,
                },
                plugins: [bodyTextPlugin],
            });
            const HUM_MIN = 0,
                HUM_MAX = 100,
                HUM_VALUE = 64;
            const getHumColor = (h) =>
                h < 30
                    ? "rgb(33,150,243)"
                    : h < 60
                      ? "rgb(76,175,80)"
                      : h < 80
                        ? "rgb(255,152,0)"
                        : "rgb(244,67,54)";
            const getHumStatus = (h) =>
                h < 30
                    ? "Dry"
                    : h < 60
                      ? "Comfort"
                      : h < 80
                        ? "Humid"
                        : "Very Humid";
            const humTextPlugin = {
                id: "humText",
                afterDraw(chart) {
                    const { ctx, chartArea } = chart;
                    const { width, height } = chartArea;
                    const h = HUM_VALUE;
                    ctx.save();
                    ctx.font = "bold 26px Inter";
                    ctx.fillStyle = "#333";
                    ctx.textAlign = "center";
                    ctx.fillText(`${h}%`, width / 2, height / 1.35);
                    ctx.font = "14px Inter";
                    ctx.fillStyle = getHumColor(h);
                    ctx.fillText(getHumStatus(h), width / 2, height / 1.15);
                    ctx.restore();
                },
            };
            new Chart(document.getElementById("humChart"), {
                type: "doughnut",
                data: {
                    datasets: [
                        {
                            data: [HUM_VALUE, HUM_MAX - HUM_VALUE],
                            backgroundColor: [
                                getHumColor(HUM_VALUE),
                                "#eaeaea",
                            ],
                            borderWidth: 0,
                            cutout: "75%",
                        },
                    ],
                },
                options: {
                    plugins: {
                        tooltip: { enabled: false },
                        legend: { display: false },
                    },
                    circumference: 180,
                    rotation: -90,
                },
                plugins: [humTextPlugin],
            });
        </script>
    </body>
</html>
